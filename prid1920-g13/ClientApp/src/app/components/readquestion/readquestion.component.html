<section *ngIf="question" class="container" style="padding: 10px;">
    <div class="row" style="border-bottom: 4px double black">
        <h3 class="col-12">{{question.title}}</h3>
        <span class="col-12">Asked : {{question.timestamp | date:'d MMM, y, h:mm:ss'}}</span>
    </div>
    <div class="row" style="border-bottom: 1px solid black">
        <div class="col-1">
            <mat-icon style="color:green;"> <a style="cursor: pointer;" (click)="addVote(question.id,1)">thumb_up</a>
            </mat-icon>
            <p>{{question.score}}</p>
            <mat-icon style="color:red;"> <a style="cursor: pointer;" (click)="addVote(question.id,-1)">thumb_down</a>
            </mat-icon>
        </div>
        <markdown [data]="question.body" class="col-10"></markdown>
        <mat-chip-list class="offset-1 col-5">
            <mat-chip *ngFor="let tag of question.tags"> {{tag.name}}</mat-chip>
        </mat-chip-list>
        <span class="col-2">Posted by {{question.user.pseudo}}</span>
    </div>
    <div class="row" style="font-size: 12px">
        <div class="offset-1 col-11">
            <div class="row" *ngFor="let com of question.comments">
                <div class="container">
                    <div class="row">
                        <markdown [data]="com.body" class="offset-1 col-11"></markdown>
                    </div>
                    <div class="row">
                        <div class="offset-7 col-3">
                            <p style="width: 100%;">
                                Commented by {{com.author.pseudo}} <br />
                                {{com.timestamp | date :'d MMM, y, h:mm:ss'}}
                            </p>
                        </div>
                        <span class="col-2" *ngIf="authService.isAdmin() || isComAuthor(com)">
                            <mat-icon> <a style="cursor: pointer;" (click)="edit(com)">edit</a></mat-icon>
                            <mat-icon> <a style="cursor: pointer;" (click)="delete(com)">delete</a></mat-icon>
                        </span>
                    </div>
                    <mat-divider class="col-12"></mat-divider>
                </div>
            </div>
            <div class="col-1">
                <mat-icon *ngIf="currentUser" aria-label="New comment"><a (click)="addComment(question.id)" style="cursor: pointer;">add</a>
                </mat-icon>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="container">
            <h3 class="col-12">Answers</h3>
            <div class="row" *ngIf="acceptedPost">
                <div class="col-1" style="justify-content: center">
                    <mat-icon style="color:green;"> <a style="cursor: pointer;"
                            (click)="addVote(acceptedPost.id,1)">thumb_up</a>
                    </mat-icon>
                    <p> {{acceptedPost.score}}</p>
                    <mat-icon style="color:red;"> <a style="cursor: pointer;"
                            (click)="addVote(acceptedPost.id,-1)">thumb_down</a>
                    </mat-icon>
                    <br />
                    <mat-icon *ngIf="currentUser" style="color: darkred"><a title="Remove accepted answer" style="cursor: pointer"
                            (click)="removeAcceptAnswer(question)">close</a></mat-icon>
                </div>
                <mat-icon>done_outline</mat-icon>
                <br />
                <div class="col-10">
                    <div class="container">
                        <div class="row">
                            <markdown [data]="acceptedPost.body"></markdown>
                        </div>
                        <div class="row">
                            <div class="offset-7 col-3" style="vertical-align: text-bottom;">
                                Answered by {{acceptedPost.user.pseudo}} <br />
                                {{acceptedPost.timestamp | date :'d MMM, y, h:mm:ss'}}
                            </div>
                            <span class="col-2" *ngIf="authService.isAdmin() || isAuthor(acceptedPost)">
                                <mat-icon> <a style="cursor: pointer;" (click)="editAnswer(acceptedPost)">edit</a>
                                </mat-icon>
                                <mat-icon> <a style="cursor: pointer;" (click)="deleteRep(acceptedPost)">delete</a>
                                </mat-icon>
                            </span>
                        </div>
                    </div>
                    <mat-divider *ngIf="acceptedPost.comments.length > 0" class="col-12"></mat-divider>
                </div>
                <div class="container">
                    <div class="row" style="font-size: 12px"
                        *ngFor="let com of acceptedPost.comments; let isLast = last;">
                        <div class="container">
                            <div class="row">
                                <markdown class="offset-2 col-8" [data]="com.body"></markdown>
                            </div>
                            <div class="row">
                                <div class="offset-7 col-3">
                                    <p style="width: 100%;">
                                        Commented by {{com.author.pseudo}} <br />
                                        {{com.timestamp | date :'d MMM, y, h:mm:ss'}}
                                    </p>
                                </div>
                                <span class="col-2" *ngIf="authService.isAdmin() || isComAuthor(com)">
                                    <mat-icon> <a style="cursor: pointer;" (click)="edit(com)">edit</a></mat-icon>
                                    <mat-icon> <a style="cursor: pointer;" (click)="delete(com)">delete</a></mat-icon>
                                </span>
                                <div class="offset-1 col-11">
                                    <mat-divider *ngIf="!isLast"></mat-divider>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="offset-11 col-1">
                        <mat-icon *ngIf="currentUser" aria-label="New comment"><a (click)="addComment(acceptedPost.id)"
                                style="cursor: pointer;">add</a></mat-icon>
                    </div>
                </div>
                <mat-divider class="col-12"></mat-divider>
            </div>
        </div>
    </div>
    <div *ngFor="let reponse of question.reponses">
        <div class="row">
            <div class="col-1">
                <mat-icon style="color:green;"> <a style="cursor: pointer;" (click)="addVote(reponse.id,1)">thumb_up</a>
                </mat-icon>
                <p> {{reponse.score}}</p>
                <mat-icon style="color:red;"> <a style="cursor: pointer;"
                        (click)="addVote(reponse.id,-1)">thumb_down</a>
                </mat-icon>
                <br />
                <mat-icon *ngIf="currentUser" style="color: green"><a title="Accept answer" style="cursor: pointer"
                        (click)="acceptAnswer(reponse)">done</a></mat-icon>
            </div>
            <div class="col-10">
                <div class="container">
                    <div class="row">
                        <markdown [data]="reponse.body"></markdown>
                    </div>
                    <div class="row">
                        <div class="offset-7 col-3" style="vertical-align: text-bottom;">
                            Answered by {{reponse.user.pseudo}} <br />
                            {{reponse.timestamp | date :'d MMM, y, h:mm:ss'}}
                        </div>
                        <span class="col-2" *ngIf="authService.isAdmin() || isAuthor(reponse)">
                            <mat-icon> <a style="cursor: pointer;" (click)="editAnswer(reponse)">edit</a></mat-icon>
                            <mat-icon> <a style="cursor: pointer;" (click)="deleteRep(reponse)">delete</a></mat-icon>
                        </span>
                    </div>
                </div>
            </div>
            <mat-divider *ngIf="reponse.comments.length > 0" class="col-12"></mat-divider>
            <div class="container">
                <div class="row" style="font-size: 12px" *ngFor="let com of reponse.comments; let isLast = last;">
                    <div class="container">
                        <div class="row">
                            <markdown [data]="com.body" class="offset-2 col-8"></markdown>
                        </div>
                        <div class="row">
                            <div class="offset-7 col-3">
                                <p style="width: 100%;">
                                    Commented by {{com.author.pseudo}} <br />
                                    {{com.timestamp | date :'d MMM, y, h:mm:ss'}}
                                </p>
                            </div>
                            <span class="col-2" *ngIf="authService.isAdmin() || isComAuthor(com)">
                                <mat-icon> <a style="cursor: pointer;" (click)="edit(com)">edit</a></mat-icon>
                                <mat-icon> <a style="cursor: pointer;" (click)="delete(com)">delete</a></mat-icon>
                            </span>
                        </div>
                        <div class="offset-1 col-11">
                            <mat-divider></mat-divider>
                        </div>
                    </div>
                    <mat-divider *ngIf="!isLast" class="col-12"></mat-divider>
                </div>
                <div class="offset-11 col-1">
                    <mat-icon *ngIf="currentUser" aria-label="New comment"><a (click)="addComment(reponse.id)"
                            style="cursor: pointer;">add</a></mat-icon>
                </div>
            </div>
        </div>
    </div>
    <div class="row" *ngIf="currentUser">
        <label for="answer" class="col-form-label-lg col-12">Your Answer</label>
        <simplemde class="col-12" id="anwser" [(ngModel)]="Answer"></simplemde>
        <markdown class="col-12" style="border: 4px double black;border-radius: 1em;margin: 10px;min-height: 100px;"
            [data]="Answer"></markdown>
        <div class="offset-9">
            <button type="submit" mat-raised-button color="primary"
                [disabled]="Answer == null || Answer == '' || Answer == undefined" (click)="send()">Send</button>
            <button type="reset" style="margin-left: 10px;" mat-raised-button color="warn"
                (click)="cancel()">Cancel</button>
        </div>
    </div>
    <ng-template #defaultDialogButtons>
        <div class="container">
            <div class="row justify-content-start">
                <div class="col-12">
                    <p class="col" style="text-align: center;">You can't vote if you are not connected, please <br/>
                            <button mat-raised-button color="primary" [routerLink]='["/login"]' (click)="closeDialog()">
                                Login
                            </button>
                            or
                            <button mat-raised-button color="primary" [routerLink]='["/signup"]' (click)="closeDialog()">
                                Signup
                            </button>
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="offset-10 col-2">
                    <button mat-raised-button color="warn"  (click)="closeDialog()">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </ng-template>
    `
</section>